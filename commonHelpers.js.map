{"version":3,"file":"commonHelpers.js","sources":["../src/js/refs.js","../src/js/switchBtn.js","../src/js/markup.js","../src/js/renderGallery.js","../src/js/beError.js","../src/js/scrollPage.js","../src/main.js"],"sourcesContent":["export const refs = {\n  container: document.querySelector('.container'),\n  form: document.querySelector('.form'),\n  btn: document.querySelector('.form-button'),\n  loader: document.querySelector('.loader'),\n  galleryList: document.querySelector('.gallery'),\n  loadMore: document.querySelector('.btn-load-more'),\n};\n","import { refs } from './refs';\n\nexport function onLoader() {\n  refs.loader.classList.remove('hidden');\n}\n\nexport function offLoader() {\n  refs.loader.classList.add('hidden');\n}\n\nexport function offBtnLoadMore() {\n  refs.loadMore.classList.add('hidden');\n}\nexport function onBtnLoadMore() {\n  refs.loadMore.classList.remove('hidden');\n}\n","export function markup(image) {\n  const {\n    largeImageURL,\n    webformatURL,\n    tags,\n    likes,\n    downloads,\n    views,\n    comments,\n  } = image;\n  return `<li class=\"gallery-item\">\n        <a href=\"${largeImageURL}\" class=\"gallery-link\">\n          <img\n            src=\"${webformatURL}\"\n            class=\"gallery-image\"\n            alt=\"${tags}\"\n          />\n        </a>\n        <div class=\"description\">\n            <div class=\"description-item\"><p>Likes</p><span>${likes}</span></div>\n            <div class=\"description-item\"><p>Downloads</p><span>${downloads}</span></div>\n            <div class=\"description-item\"><p>Views</p><span>${views}</span></div>\n            <div class=\"description-item\"><p>Comments</p><span>${comments}</span></div>\n        </div>\n      </li>`;\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport { refs } from './refs';\nimport { markup } from './markup';\n\nexport function renderGallery(answer) {\n  const result = answer.data.map(markup).join('');\n  if (totalHits > perPage) {\n    refs.loadMore.classList.remove('hidden');\n  }\n  if (answer.data.length) {\n    refs.galleryList.insertAdjacentHTML('beforeend', result);\n\n    const lightbox = new SimpleLightbox('.gallery a', {\n      captions: true,\n      captionSelector: 'img',\n      captionPosition: 'bottom',\n    });\n\n    lightbox.refresh();\n  }\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nexport const noImagesError =\n  'Sorry, there are no images matching your search query. Please try again!';\nexport const writeSomething = 'Please, write something';\nexport const endSearchesRults =\n  'We are sorry, but you have reached the end of search results.';\n\nexport function beError(message) {\n  iziToast.error({\n    position: 'topRight',\n\n    maxWidth: '432',\n    backgroundColor: '#ef4040',\n    messageColor: '#fafafb',\n    messageSize: '16px',\n    message: message,\n  });\n}\n","export function scrollPage() {\n  if (page > 1) {\n    const rect = document\n      .querySelector('.gallery-item')\n      .getBoundingClientRect();\n    window.scrollBy({ top: rect.height * 2, left: 0, behavior: 'smooth' });\n  }\n}\n","import axios from 'axios';\n\nimport { refs } from './js/refs.js';\nimport { onLoader } from './js/switchBtn.js';\nimport { offLoader } from './js/switchBtn.js';\nimport { renderGallery } from './js/renderGallery.js';\nimport { beError } from './js/beError.js';\nimport { noImagesError } from './js/beError.js';\nimport { writeSomething } from './js/beError.js';\nimport { endSearchesRults } from './js/beError.js';\nimport { scrollPage } from './js/scrollPage.js';\n\nlet query = '';\nlet page = 1;\nconst perPage = 15;\n\n// ===========pixabayApi===========\n\nasync function pixabayApi(input) {\n  const API_KEY = '42447990-17cd7de231c9689be9e26f0f6';\n  const BASE_URL = 'https://pixabay.com/api/';\n  const param = `q=${input}&image_type=photo&orientation=horizontal&safesearch=true`;\n  const URL = `${BASE_URL}?key=${API_KEY}&${param}`;\n\n  const resp = await axios.get(URL);\n  return resp.data;\n}\n\nrefs.form.addEventListener('submit', onFormSubmit);\nrefs.loadMore.addEventListener('click', onLoadMore);\n\n// ===========onFormSubmit===========\n\nasync function onFormSubmit(event) {\n  event.preventDefault();\n\n  page += 1;\n\n  refs.galleryList.innerHTML = '';\n  query = event.currentTarget.elements.input.value.trim();\n\n  if (!query) {\n    refs.form.elements.input.value = '';\n    beError(writeSomething);\n    return;\n  }\n\n  onLoader();\n\n  try {\n    const answer = await pixabayApi(query);\n    renderGallery(answer);\n    statusBtn(answer, page);\n  } catch (error) {\n    beError(noImagesError);\n  } finally {\n    offLoader();\n  }\n  refs.form.reset();\n  refs.loadMore.classList.remove('hidden');\n}\n\n// ===========onLoadMore===========\n\nasync function onLoadMore() {\n  onLoader();\n\n  try {\n    const answer = await pixabayApi(query);\n    renderGallery(answer);\n    scrollPage();\n    offLoader();\n  } catch (error) {\n    beError(noImagesError);\n  }\n}\n\n// ===============statusBt==========\nfunction statusBtn(data, page) {\n  const maxPage = Math.ceil(data.totalHits / 15);\n  console.log(maxPage);\n  if (maxPage <= page) {\n    refs.loadMore.classList.add('hidden');\n    refs.loader.classList.add('hidden');\n    iziToast.error(endSearchesRults);\n  } else {\n    refs.loadMore.classList.remove('hidden');\n  }\n}\n"],"names":["refs","onLoader","offLoader","markup","image","largeImageURL","webformatURL","tags","likes","downloads","views","comments","renderGallery","answer","result","SimpleLightbox","noImagesError","writeSomething","endSearchesRults","beError","message","iziToast","scrollPage","rect","query","page","pixabayApi","input","API_KEY","BASE_URL","param","URL","axios","onFormSubmit","onLoadMore","event","statusBtn","data","maxPage"],"mappings":"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"}