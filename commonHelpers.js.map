{"version":3,"file":"commonHelpers.js","sources":["../src/js/refs.js","../src/js/switchBtn.js","../src/js/pixabayApi.js","../src/js/beError.js","../src/js/hitElements.js","../src/main.js"],"sourcesContent":["export const refs = {\n  form: document.querySelector('.form'),\n  btn: document.querySelector('.form-button'),\n  loader: document.querySelector('.loader'),\n  galleryList: document.querySelector('.gallery'),\n  loadMore: document.querySelector('.btn-load-more'),\n  input: document.querySelector('input'),\n};\n","import { refs } from './refs';\n\nexport function onLoader() {\n  refs.loader.classList.remove('hidden');\n}\n\nexport function offLoader() {\n  refs.loader.classList.add('hidden');\n}\n\nexport function offBtnLoadMore() {\n  refs.loadMore.classList.add('hidden');\n}\nexport function onBtnLoadMore() {\n  refs.loadMore.classList.remove('hidden');\n}\n","import axios from 'axios';\nimport { searchImages } from 'pixabay-api';\nimport { offBtnLoadMore } from './switchBtn';\n\nexport async function pixabayApi(query, pageCount) {\n  offBtnLoadMore();\n  const API_KEY = '42447990-17cd7de231c9689be9e26f0f6';\n  const url = `https://pixabay.com/api/?key=${API_KEY}&q=${query}&image_type=photo&orientation=horizontal&safesearch=true`;\n\n  const params = {\n    page: pageCount,\n    per_page: 15,\n  };\n\n  const res = await axios.get(url, { params });\n  return res.data;\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nexport const noImagesError =\n  'Sorry, there are no images matching your search query. Please try again!';\nexport const writeSomething = 'Please, write something';\nexport const endSearchesRults =\n  'We are sorry, but you have reached the end of search results.';\n\nexport function beError(message) {\n  iziToast.error({\n    position: 'topRight',\n    message: message,\n  });\n}\n","function hitElement(hit) {\n  const {\n    largeImageURL,\n    webformatURL,\n    tags,\n    likes,\n    downloads,\n    views,\n    comments,\n  } = hit;\n  return `<li class=\"gallery-item\">\n        <a href=\"${largeImageURL}\" class=\"gallery-link\">\n          <img\n            src=\"${webformatURL}\"\n            class=\"gallery-image\"\n            alt=\"${tags}\"\n          />\n        </a>\n        <div class=\"description\">\n            <div class=\"description-item\"><p>Likes</p><span>${likes}</span></div>\n            <div class=\"description-item\"><p>Downloads</p><span>${downloads}</span></div>\n            <div class=\"description-item\"><p>Views</p><span>${views}</span></div>\n            <div class=\"description-item\"><p>Comments</p><span>${comments}</span></div>\n        </div>\n      </li>`;\n}\n// Приймаємо об'єкт hit та масив hits (значення з нетворку)\nexport function hitElements(hits) {\n  return hits.map(hitElement).join('');\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport { refs } from './js/refs.js';\nimport { pixabayApi } from './js/pixabayApi.js';\nimport { beError, noImagesError } from './js/beError.js';\nimport { writeSomething } from './js/beError.js';\nimport { hitElements } from './js/hitElements.js';\nimport { endSearchesRults } from './js/beError.js';\nimport {\n  offBtnLoadMore,\n  offLoader,\n  onBtnLoadMore,\n  onLoader,\n} from './js/switchBtn.js';\n\nlet query;\nlet page = 1;\nconst perPage = 15;\nlet maxPage;\nlet lightbox;\n\nrefs.form.addEventListener('submit', onFormSubmit);\nrefs.loadMore.addEventListener('click', onLoadMoreClick);\n\nasync function onFormSubmit(event) {\n  event.preventDefault();\n  query = event.target.elements.input.value.trim();\n\n  if (!query) {\n    beError(writeSomething);\n    offLoader();\n    offBtnLoadMore();\n    return;\n  }\n\n  onLoader();\n  page = 1;\n  const data = await pixabayApi(query, page);\n\n  if (data.hits === '') {\n    beError(noImagesError);\n    offLoader();\n    offBtnLoadMore();\n    return;\n  }\n\n  maxPage = Math.ceil(data.totalHits / 15);\n  refs.galleryList.innerHTML = '';\n  renderGallery(data.hits);\n  offLoader();\n\n  statusHiddenBtn(data, page);\n  event.target.reset();\n}\n\nasync function onLoadMoreClick() {\n  page += 1;\n  const data = await pixabayApi(query, page);\n  renderGallery(data.hits);\n  statusHiddenBtn(data, page);\n}\n\nfunction renderGallery(hits) {\n  const result = hitElements(hits);\n\n  if (hits.length > perPage) {\n    refs.loadMore.classList.remove('hidden');\n  }\n\n  if (hits.length > 0) {\n    refs.galleryList.insertAdjacentHTML('beforeend', result);\n\n    if (lightbox) {\n      lightbox.destroy();\n    }\n\n    lightbox = new SimpleLightbox('.gallery a', {\n      captions: true,\n      captionSelector: 'img',\n      captionPosition: 'bottom',\n    });\n\n    lightbox.refresh();\n  }\n}\n\nfunction statusHiddenBtn(page) {\n  if (page >= maxPage) {\n    offBtnLoadMore();\n    offLoader();\n    beError(endSearchesRults);\n  } else {\n    onBtnLoadMore();\n  }\n}\n"],"names":["refs","onLoader","offLoader","offBtnLoadMore","onBtnLoadMore","pixabayApi","query","pageCount","url","params","axios","noImagesError","writeSomething","endSearchesRults","beError","message","iziToast","hitElement","hit","largeImageURL","webformatURL","tags","likes","downloads","views","comments","hitElements","hits","page","perPage","maxPage","lightbox","onFormSubmit","onLoadMoreClick","event","data","renderGallery","statusHiddenBtn","result","SimpleLightbox"],"mappings":"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"}